---
title: "Project 1"
author: "Ibrahim Junaid - is23323"
output: html_document
---

```{r global_options, echo=FALSE}
knitr::opts_chunk$set(fig.height=3, fig.width=4, warning=FALSE, tidy=TRUE, echo=FALSE,
                      tidy.opts=list(width.cutoff=60))
```


```{r}
#reads in the dataset
PS = read.csv('Project1_school.csv')
```


```{r}
#creates a new variable in the dataset
PS$High_Math_GPA_State = (PS$Academic.Subjects.Mathematics.Average.GPA >= 3.5)
```


```{r message=FALSE}
#creates a new dataset filtered to only include the State, Year, GPA, and SAT score
library(tidyverse)
HighGPA_States = filter(PS, High_Math_GPA_State == TRUE, Year >= 2010) |>
  select(State.Name, Year, Academic.Subjects.Mathematics.Average.GPA, Total.Math)
```

# **Introduction:**

The SAT *(Scholastic Assessment Test)* is a standardized exam, most popular among American high school systems
and is used mainly for college admissions. This dataset compiles detailed SAT performance reports across U.S. states by year, including overall Math and Verbal scores, but also breakdowns by demographics, academic preparation, and family income.

For this project, my **outcome variable of interest** is **average Math SAT score**. To better understand what factors relate to Math performance, I selected three predictors:

**State**: To compare differences in Math scores across U.S. states.  
**Year**: To examine trends in average Math SAT scores over time. *(Focused only on scores from 2010 and beyond)*  
**High Math GPA by State**: This variable captures how well students perform in their math coursework and how that correlates to their SAT score. *(A high GPA is >= 3.5)*

Below is an image of students taking the SAT:

![](SATpic1.webp)
[**Image credits - NYTimes**](https://www.nytimes.com/2018/01/11/nyregion/sat-new-york-up-by-half-achievement-gap.html)

# **Outcome Variable:**

The outcome variable in this analysis is the **average Math SAT score**. A histogram of these scores across all states and years is displayed below:


```{r}
#Shows the distribution of SAT scores from our new dataset
library(ggplot2)
ggplot(HighGPA_States) + geom_histogram (aes(x=Total.Math), binwidth=10, col="lightblue", fill='black') + labs(x='Average Math Score', title = 'Distribution of Average Math SAT Scores', y = 'Count') + theme_classic() 
```

The Math SAT scores range from a minimum of **`r round(min(HighGPA_States$Total.Math, na.rm = TRUE), 2)`** to a maximum of **`r round(max(HighGPA_States$Total.Math, na.rm = TRUE), 2)`**. The mean score is **`r round(mean(HighGPA_States$Total.Math, na.rm = TRUE), 2)`**, and the median score is **`r round(median(HighGPA_States$Total.Math, na.rm = TRUE), 2)`**.

# **Bivariate Analyses:**

<h5 style="color:blue;">Bivariate Analyses 1:</h5>

The first graph shows whether **Math SAT scores** changed over time for states with high **Math GPA**. 


```{r fig.height=5, fig.width=7}
#Shows the differences in the SAT Math scores as the years go by
ggplot(HighGPA_States) + geom_jitter(aes(x = Year, y = Total.Math), width = 0.3, alpha = 0.5, col="lightblue") + labs(title = "Average Math SAT Score over Time (Post 2010)", x = "Year", y = "Average Math Score") + theme_classic()
```

The correlation between year and average Math score is `r round(cor(HighGPA_States$Year, HighGPA_States$Total.Math), 2)`, indicating a **very weak negative relationship**.


<h5 style="color:green;">Bivariate Analyses 2:</h5>

The second graph takes a look at how Math scores vary across high-GPA states.


```{r fig.height=7, fig.width=15}
#This graph shows the distributon of SAT scores across all states present in the dataset
ggplot(HighGPA_States) + geom_boxplot(aes(x = reorder(State.Name, Total.Math, FUN = median), y = Total.Math), col="lightblue", fill='black') + labs(title = "Distribution of Math Scores by State (High GPA States, Post 2010)", x = "State", y = "Average Math Score") + theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 14), axis.title = element_text(size=18), plot.title = element_text(size=18))
```


```{r}
#Gives us the median Math SAT score for each state
x = group_by(HighGPA_States, State.Name)
summarize(x, median(Total.Math)) 
```


The graph reveals a significant variation in average math scores among these states, with some consistently performing at a much higher level than others. 




```{r}
#Gives us the mean, median, max and min of the Math SAT scores correlated to the states
state_stats = HighGPA_States |>
group_by(State.Name) |>
summarise(mean = mean(Total.Math, na.rm = TRUE), median = median(Total.Math, na.rm = TRUE), min = min(Total.Math, na.rm = TRUE), max = max(Total.Math, na.rm = TRUE))
```



<h5 style="color:purple;">Bivariate Analyses 3:</h5>

The third graph explores the relationship between Math GPA and SAT Math performance.


```{r fig.height=5, fig.width=7}
#Shows us the relation between Math SAT Scores and Math GPA
ggplot(HighGPA_States) + geom_point(aes(x = Academic.Subjects.Mathematics.Average.GPA, y = Total.Math), col="lightblue") +
labs(title = "Math SAT Score vs. Average Math GPA (Post 2010)", x = "Average Math GPA", y = "Average Math Score") +
theme_classic()
```

The correlation between **Math SAT scores** and high **Math GPA** is
`r round(cor(HighGPA_States$Academic.Subjects.Mathematics.Average.GPA, HighGPA_States$Total.Math), 2)` indicating a strong positive relationship


<h5 style="color:pink;">Multivariate Analysis:</h5>

This multivariate graph looks at the relationship between year, math GPA and the subsequent SAT scores.

```{r fig.height=5, fig.width=7}
ggplot(HighGPA_States) + geom_point(aes(x = Year, y = Total.Math, color = Academic.Subjects.Mathematics.Average.GPA), size = 3, alpha = 0.7) + labs(title = "Multivariate Relationship: Year, Math GPA, and Math SAT Scores", x = "Year", y = "Average Math SAT Score", color = "Average Math GPA") + theme_classic()
```

The multivariate analysis shows that states with high GPAs after 2010 had an average Math SAT score of **`r round(mean(HighGPA_States$Total.Math, na.rm=TRUE),2)`** and an average Math GPA of **`r round(mean(HighGPA_States$Academic.Subjects.Mathematics.Average.GPA, na.rm=TRUE),2)`**.  

The correlation between **Year and Math SAT score** is `r round(cor(HighGPA_States$Year, HighGPA_States$Total.Math),2)`, while the correlation between **Math GPA and SAT Math scores** is stronger at `r round(cor(HighGPA_States$Academic.Subjects.Mathematics.Average.GPA, HighGPA_States$Total.Math),2)`. The correlation between **Year and Math GPA** is `r round(cor(HighGPA_States$Year, HighGPA_States$Academic.Subjects.Mathematics.Average.GPA),2)`.  

This confirms that **Math GPA is a stronger predictor of SAT performance than Year**.

<h5 style="color:orange;">Conclusion:</h5>

In this analysis, I found that Math SAT performance has remained mostly unchanged over time among states with high GPAs (post-2010). However, there are substantial differences across states, and Math GPA shows a strong positive association with Math SAT scores.  

**Future Research Suggestions:**  
1. Investigate why certain states, like **Puerto Rico**, have persistently low SAT Math scores compared to others altough they have high GPAs. ([College Board data on Puerto Rico](https://reports.collegeboard.org/media/pdf/2024-puerto-rico-sat-suite-of-assessments-annual-report-ADA.pdf))  
2. Include more **Demographic Predictors**([info](https://satsuite.collegeboard.org/help-center/what-performance-demographics-report)) (such as race, parental education, or test prep participation) to better understand disparities in SAT outcomes.  

**References:**

[**Image credits - NYTimes**](https://www.nytimes.com/2018/01/11/nyregion/sat-new-york-up-by-half-achievement-gap.html)

[**College Board data on Puerto Rico**](https://reports.collegeboard.org/media/pdf/2024-puerto-rico-sat-suite-of-assessments-annual-report-ADA.pdf)

[**Demographic Predictors**](https://satsuite.collegeboard.org/help-center/what-performance-demographics-report)
